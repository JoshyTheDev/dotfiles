#!/bin/bash

# Check if a wallpaper was provided
if [ -z "$1" ] || [ ! -f "$1" ]; then
    # If no valid path provided, try to use last wallpaper
    if [ -f ~/.cache/wal/wal ]; then
        WALLPAPER=$(cat ~/.cache/wal/wal)
    else
        # Fallback to a random wallpaper
        WALLPAPER=$(find ~/Pictures/Wallpapers -type f | shuf -n 1)
    fi
else
    WALLPAPER="$1"
fi

# Generate pywal colors
wal -i "$WALLPAPER"

# Reload Hyprland config to apply new colors
hyprctl reload
